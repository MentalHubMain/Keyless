local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Mental Hub",
   LoadingTitle = "Don't Get Crushed By 67",
   LoadingSubtitle = "by Mental Hub",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "MentalHub_DGC67",
      FileName = "MentalHubConfig"
   },
   Discord = {
      Enabled = false,
      Invite = "noinvitelink", 
      RememberJoins = true 
   },
   KeySystem = false, 
})

-- [ SERVICES ]
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- [ CONSTANTS ]
local WORLD_POSITIONS = {
    [1] = Vector3.new(-1884.945, -54.58, 287.75),
    [2] = Vector3.new(-2894.947, -58.5, -950.399),
    [3] = Vector3.new(-4826.948, -58.5, -2462.399)
}

local Flags = {
    AutoWinW1 = false,
    AutoWinW2 = false,
    AutoWinW3 = false,
    AutoRebirth = false,
    AutoWalkSpeed = false,
    AutoCash = false,
    AutoHealth = false,
    -- Player Settings
    FlyEnabled = false,
    FlySpeed = 50,
    WalkSpeedToggle = false,
    WalkSpeedValue = 16,
    Noclip = false,
    InfJump = false
}

-- [ FUNCTIONS ]
local function TeleportTo(pos)
    local char = LocalPlayer.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = CFrame.new(pos)
        task.wait(0.1)
        if hrp then
            -- Position adjustment for touch interest
            hrp.CFrame = hrp.CFrame * CFrame.new(0, 5, 0) 
            hrp.AssemblyLinearVelocity = Vector3.new(0, 5, 0)
        end
    end
end

local function StartFly()
    local char = LocalPlayer.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart")
    local human = char:FindFirstChild("Humanoid")
    if not root or not human then return end

    -- Cleanup existing forces
    for _, v in pairs(root:GetChildren()) do
        if v.Name == "MentalHubFly" then v:Destroy() end
    end

    local bv = Instance.new("BodyVelocity", root)
    bv.Name = "MentalHubFly"
    bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    bv.Velocity = Vector3.zero

    local bg = Instance.new("BodyGyro", root)
    bg.Name = "MentalHubFly"
    bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    bg.P = 9e4
    bg.CFrame = root.CFrame

    task.spawn(function()
        while Flags.FlyEnabled and char.Parent do
            human.PlatformStand = true
            
            local cam = workspace.CurrentCamera
            local moveDir = human.MoveDirection
            local speed = Flags.FlySpeed
            
            -- Direction calculation relative to camera
            local look = cam.CFrame.LookVector
            local right = cam.CFrame.RightVector
            
            if moveDir.Magnitude > 0 then
                 -- Calculate velocity vector
                 local newVel = (moveDir.X * right + moveDir.Z * look) * speed
                 newVel = newVel + Vector3.new(0, moveDir.Y * speed, 0) 
                 
                 if moveDir.Magnitude > 0 then
                    newVel = cam.CFrame.LookVector * speed
                 end

                 bg.CFrame = cam.CFrame
                 bv.Velocity = cam.CFrame.LookVector * speed
            else
                 bv.Velocity = Vector3.zero
            end
            
            bg.CFrame = cam.CFrame
            RunService.RenderStepped:Wait()
        end
        
        if human then human.PlatformStand = false end
        bv:Destroy()
        bg:Destroy()
    end)
end

-- [ UI CONSTRUCTION ]
local MainTab = Window:CreateTab("Main", 4483362458) 
local ShopTab = Window:CreateTab("Shop", 4483362458)
local PlayerTab = Window:CreateTab("Player", 4483362458)
local MiscTab = Window:CreateTab("Misc", 4483362458)

-- [ MAIN TAB ]

MainTab:CreateSection("Auto Wins")

MainTab:CreateToggle({
   Name = "Auto Win World 1",
   CurrentValue = false,
   Flag = "AutoWinW1",
   Callback = function(Value)
        Flags.AutoWinW1 = Value
        if Value then
            -- Mutual exclusion
            if Flags.AutoWinW2 then Flags.AutoWinW2 = false end
            if Flags.AutoWinW3 then Flags.AutoWinW3 = false end
            
            task.spawn(function()
                while Flags.AutoWinW1 do
                    TeleportTo(WORLD_POSITIONS[1])
                    task.wait(20)
                end
            end)
        end
   end,
})

MainTab:CreateToggle({
   Name = "Auto Win World 2",
   CurrentValue = false,
   Flag = "AutoWinW2",
   Callback = function(Value)
        Flags.AutoWinW2 = Value
        if Value then
            task.spawn(function()
                while Flags.AutoWinW2 do
                    TeleportTo(WORLD_POSITIONS[2])
                    task.wait(20)
                end
            end)
        end
   end,
})

MainTab:CreateToggle({
   Name = "Auto Win World 3",
   CurrentValue = false,
   Flag = "AutoWinW3",
   Callback = function(Value)
        Flags.AutoWinW3 = Value
        if Value then
            task.spawn(function()
                while Flags.AutoWinW3 do
                    TeleportTo(WORLD_POSITIONS[3])
                    task.wait(20)
                end
            end)
        end
   end,
})

MainTab:CreateSection("Rebirth")

MainTab:CreateToggle({
   Name = "Auto Rebirth",
   CurrentValue = false,
   Flag = "AutoRebirth",
   Callback = function(Value)
        Flags.AutoRebirth = Value
        if Value then
            task.spawn(function()
                while Flags.AutoRebirth do
                    pcall(function()
                        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("rebirthReq"):FireServer()
                    end)
                    task.wait(5)
                end
            end)
        end
   end,
})

-- [ PLAYER TAB ]

PlayerTab:CreateSection("Movement")

PlayerTab:CreateToggle({
    Name = "Universal Fly",
    CurrentValue = false,
    Flag = "FlyEnabled",
    Callback = function(Value)
        Flags.FlyEnabled = Value
        if Value then
            StartFly()
        end
    end,
})

PlayerTab:CreateSlider({
    Name = "Fly Speed",
    Range = {10, 300},
    Increment = 10,
    Suffix = "Studs",
    CurrentValue = 50,
    Flag = "FlySpeed",
    Callback = function(Value)
        Flags.FlySpeed = Value
    end,
})

PlayerTab:CreateToggle({
    Name = "Set WalkSpeed (Loop)",
    CurrentValue = false,
    Flag = "WalkSpeedToggle",
    Callback = function(Value)
        Flags.WalkSpeedToggle = Value
    end,
})

PlayerTab:CreateSlider({
    Name = "WalkSpeed Value",
    Range = {16, 500},
    Increment = 1,
    CurrentValue = 16,
    Flag = "WalkSpeedValue",
    Callback = function(Value)
        Flags.WalkSpeedValue = Value
    end,
})

PlayerTab:CreateSection("Physics")

PlayerTab:CreateToggle({
    Name = "Noclip",
    CurrentValue = false,
    Flag = "Noclip",
    Callback = function(Value)
        Flags.Noclip = Value
    end,
})

PlayerTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Flag = "InfJump",
    Callback = function(Value)
        Flags.InfJump = Value
    end,
})

-- [ SHOP TAB ]

ShopTab:CreateSection("Upgrades")

ShopTab:CreateToggle({
   Name = "Auto Buy WalkSpeed",
   CurrentValue = false,
   Flag = "AutoWalkSpeed",
   Callback = function(Value)
        Flags.AutoWalkSpeed = Value
        if Value then
            task.spawn(function()
                while Flags.AutoWalkSpeed do
                    pcall(function()
                        local args = {"Upgrade", "WalkSpeed"}
                        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CashShop"):InvokeServer(unpack(args))
                    end)
                    task.wait(0.5)
                end
            end)
        end
   end,
})

ShopTab:CreateToggle({
   Name = "Auto Buy Cash Multiplier",
   CurrentValue = false,
   Flag = "AutoCash",
   Callback = function(Value)
        Flags.AutoCash = Value
        if Value then
            task.spawn(function()
                while Flags.AutoCash do
                    pcall(function()
                        local args = {"Upgrade", "Cash"}
                        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CashShop"):InvokeServer(unpack(args))
                    end)
                    task.wait(0.5)
                end
            end)
        end
   end,
})

ShopTab:CreateToggle({
   Name = "Auto Buy Health",
   CurrentValue = false,
   Flag = "AutoHealth",
   Callback = function(Value)
        Flags.AutoHealth = Value
        if Value then
            task.spawn(function()
                while Flags.AutoHealth do
                    pcall(function()
                        local args = {"Upgrade", "Health"}
                        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CashShop"):InvokeServer(unpack(args))
                    end)
                    task.wait(0.5)
                end
            end)
        end
   end,
})

-- [ MISC TAB ]

MiscTab:CreateSection("Info")

MiscTab:CreateButton({
    Name = "Join Discord",
    Callback = function()
        setclipboard("https://discord.gg/QA2yHSuTjw")
        Rayfield:Notify({
            Title = "Success",
            Content = "Discord Link Copied to Clipboard",
            Duration = 3,
            Image = 4483362458
        })
    end,
})

MiscTab:CreateButton({
    Name = "Unload Script",
    Callback = function()
        Rayfield:Destroy()
    end,
})

-- [ LOGIC HANDLERS ]

RunService.Stepped:Connect(function()
    local char = LocalPlayer.Character
    if char then
        if Flags.WalkSpeedToggle then
            local hum = char:FindFirstChild("Humanoid")
            if hum then
                hum.WalkSpeed = Flags.WalkSpeedValue
            end
        end
        
        if Flags.Noclip then
            for _, part in pairs(char:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end
end)

UserInputService.JumpRequest:Connect(function()
    if Flags.InfJump then
        local char = LocalPlayer.Character
        local hum = char and char:FindFirstChild("Humanoid")
        if hum then
            hum:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
end)

Rayfield:Notify({
   Title = "Mental Hub Loaded",
   Content = "Script Initialized",
   Duration = 5,
   Image = 4483362458,
})
